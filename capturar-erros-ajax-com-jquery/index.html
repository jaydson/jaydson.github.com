
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Capturar erros Ajax com jQuery - Jaydson Gomes</title>
  <meta name="author" content="Jaydson Gomes">

  
  <meta name="description" content="Catch Ajax errors is a task that jQuery gives us a good help.
What I mean by that is that the library provides us with a lot of useful information &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta property="og:title" content="Jaydson Gomes" />
  <meta property="og:description" content="Um Blog sobre HTML5 e JavaScript" />
  <meta property="og:image" content="/images/jaydson-gomes-logo.png" />

  
  <link rel="canonical" href="http://jaydson.org/capturar-erros-ajax-com-jquery/">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Condensed' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/blog-header-experiments.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Jaydson Gomes" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1264252-8']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup id="header-stage">
  <h1><a href="/">Jaydson Gomes</a></h1>
  
    <h2>HTML5 | JavaScript</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jaydson.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h2 class="entry-title">Capturar Erros Ajax Com jQuery</h2>
    
    
      <p class="meta">
        








  


<time datetime="2009-09-14T23:15:15-03:00" pubdate data-updated="true">Sep 14<span>th</span>, 2009</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Catch Ajax errors is a task that jQuery gives us a good help.
What I mean by that is that the library provides us with a lot of useful information that often go unnoticed by developers.
The first thing to note is the <strong>error </strong>event.
In this event we can pass a function (callback) that will be executed when the request fails.
3 parameters are passed to this function: The XMLHttpRequest object, a String that describes the type of error that occurred and an exception object (optional).
A good point is that we will never have the <strong>Success </strong>and <strong>Error </strong>event together in the same request (that means obvious).</p>

<p>Capturar erros Ajax é mais uma tarefa que o jQuery nos da uma boa ajuda.
O que quero dizer com isso é que a biblioteca nos fornece uma série de informações úteis que as vezes passam desapercebidas pelos desenvolvedores.
A primeira coisa a se notar é o evento <strong>error</strong>.
Neste evento podemos passar uma função(<em>callback</em>) que será executada quando a requisição falhar. São passados 3 parâmetros para esta função:
O objeto XMLHttpRequest, uma String que descreve o tipo do erro que aconteceu e um objeto exceção(opcional).
Uma boa observação é que nunca teremos o evento <strong>Success </strong>e o evento <strong>Error </strong>juntos na mesma requisição(meio óbvio isso).</p>

<!-- more -->


<p>Let&#8217;s take a simple example of an Ajax request:</p>

<p>[javascript]</p>

<p>$.ajax({
type: &#8220;POST&#8221;,
url: &#8220;teste.php&#8221;,
success: function(retorno){
alert(retorno);
}
});</p>

<p>[/javascript]</p>

<p>In this example we make an Ajax request and success give a alert of the content returned.
But what if we give some kind of mistake?
If we want to catch the error and get some treatment, or simply display the error.
We will now see an example of capturing the error:</p>

<p>[javascript]</p>

<p>$.ajax({
type: &#8220;POST&#8221;,
url: &#8220;teste.php&#8221;,
success: function(retorno){
alert(retorno);
},
error: function(XMLHttpRequest, textStatus, errorThrown){
alert(&#8220;Error!&#8221;);
}
});</p>

<p>[/javascript]</p>

<p>Now grab the error and give an error alert in the event of failed requests.
Now to be more useful, we see the properties and methods of the XMLHttpRequest object.
Just make a &#8220;for in&#8221; in the object that we get all their properties. Below I list some:
<strong>
dispatchEvent()
removeEventListener()
open()
setRequestHeader()
send()
readyState
status
channel
responseXML
responseText
statusText
abort()
getAllResponseHeaders()
getResponseHeader()</strong></p>

<hr />

<p>If you want to do the test and scan the object and see its properties:</p>

<p>[javascript]
for(i in XMLHttpRequest){
if(i!=&#8221;channel&#8221;)
document.write(i +&#8221; : &#8221; + XMLHttpRequest[i] +&#8221;<br>&#8221;)
}
[/javascript]</p>

<ul>
<li>This filter testing whether the property is &#8220;channel&#8221; is necessary because the browser generates an exception permission denied to view this property.</li>
</ul>


<p>Well, with this you can have a good grasp on how to catch Ajax errors, now what to do with them is with you.
I used this very technique in Ajax handling on project <a href="http://thewebmind.org/">TheWebMind.org</a>, and some other systems.
I am preparing a plugin for jQuery which will help a lot.
Here is a preview of what already implemented below:</p>

<p>[javascript]
error: function(XMLHttpRequest, textStatus, errorThrown){
$(XMLHttpRequest).AjaxDebug({
containerId : &#8220;load&#8221;,
nativeConsole : false
});
}
[/javascript]</p>

<p>The idea is to provide a console that displays this information, or pass the information to a particular element.
Soon post here when you&#8217;re done!</p>

<p>Of course, let&#8217;s not forget the <a href="http://getfirebug.com/">Firebug</a> is an excellent debugger for Ajax too.
Vamos a um exemplo simples de uma requisição Ajax:</p>

<p>[javascript]</p>

<p>$.ajax({
type: &#8220;POST&#8221;,
url: &#8220;teste.php&#8221;,
success: function(retorno){
alert(retorno);
}
});</p>

<p>[/javascript]</p>

<p>Neste exemplo fazemos uma requisição Ajax e no sucesso damos um alerta do conteúdo retornado.
Mas e se der algum tipo de erro?
Vai de aplicação para aplicação, mas dependendo do caso podemos querer capturar o erro e fazer algum tratamento, ou simplesmente mostrar o erro.
Vamos agora ver um exemplo capturando o erro:</p>

<p>[javascript]</p>

<p>$.ajax({
type: &#8220;POST&#8221;,
url: &#8220;teste.php&#8221;,
success: function(retorno){
alert(retorno);
},
error: function(XMLHttpRequest, textStatus, errorThrown){
alert(&#8220;Erro!&#8221;);
}
});</p>

<p>[/javascript]</p>

<p>Agora capturamos o erro e damos um alerta de erro caso ocorra falha na requisição.
Agora para ficar pouco mais útil, vamos ver as propriedades e métodos do objeto XMLHttpRequest.
Basta fazer um &#8220;for in&#8221; no objeto que conseguimos pegar todas suas propriedades. Abaixo listo algumas:
<strong>
dispatchEvent()
removeEventListener()
open()
setRequestHeader()
send()
readyState
status
channel
responseXML
responseText
statusText
abort()
getAllResponseHeaders()
getResponseHeader()
</strong>
Caso queiram fazer o teste e varrer o objeto e ver suas propriedades:</p>

<p>[javascript]
for(i in XMLHttpRequest){
if(i!=&#8221;channel&#8221;)
document.write(i +&#8221; : &#8221; + XMLHttpRequest[i] +&#8221;<br>&#8221;)
}
[/javascript]</p>

<p>OBS:
Este filtro testando se a propriedade é &#8220;channel&#8221; é necessário, pois o browser gera uma exceção de permissão negada para ler essa propriedade.</p>

<p>Bom, com isso já da pra ter uma boa noção sobre como capturar erros Ajax, agora o que fazer com eles é com vocês.
Usei bastante esta técnica na manipulação de Ajax no projeto <a href="http://thewebmind.org">TheWebMind.org</a>, e em alguns outros sistemas.
Estou preparando um plugin para o jQuery que auxiliará bastante.
Segue uma prévia do que já implementei abaixo:</p>

<p>[javascript]
error: function(XMLHttpRequest, textStatus, errorThrown){
$(XMLHttpRequest).AjaxDebug({
containerId : &#8216;load&#8217;,
nativeConsole : false
});
}
[/javascript]</p>

<p>A idéia é fornecer um console que mostre estas informações, ou passar as informações para um determinado elemento.
Em breve posto aqui quando estiver pronto!</p>

<p>E claro, não vamos esquecer do <a href="http://getfirebug.com">Firebug</a> que é um excelente debugador para Ajax também.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jaydson Gomes</span></span>

      








  


<time datetime="2009-09-14T23:15:15-03:00" pubdate data-updated="true">Sep 14<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/jquery-plugins/'>Jquery-Plugins</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://jaydson.org/capturar-erros-ajax-com-jquery/" data-via="" data-counturl="http://jaydson.org/capturar-erros-ajax-com-jquery/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/javascript-e-acessibilidade/" title="Previous Post: Javascript e Acessibilidade">&laquo; Javascript e Acessibilidade</a>
      
      
        <a class="basic-alignment right" href="/javascript-problema-com-evento-change/" title="Next Post: Javascript - Problema com Evento Change">Javascript - Problema com Evento Change &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
<section>
	<span class="avatar">
		<img src="http://www.gravatar.com/avatar/572696200604e59baa59ee90d61f7d02?s=180" alt="Jaydson Gomes " title="Jaydson Gomes" />
	</span>
</section>
<section class="author">	
	<strong>Entusiasta JavaScript && FrontEnd Engineer no Terra && Curador do BrazilJS</strong>
</section><section>
  <h1>Posts Recentes</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/o-javascript-e-a-geladeira/">O JavaScript e a Geladeira</a>
      </li>
    
      <li class="post">
        <a href="/experimentos-html5-no-header-do-blog/">Experimentos HTML5 no header do Blog</a>
      </li>
    
      <li class="post">
        <a href="/migrando-para-octopress/">Migrando para o Octopress</a>
      </li>
    
      <li class="post">
        <a href="/analytics-do-blog-em-2012/">Analytics do Blog em 2012</a>
      </li>
    
      <li class="post">
        <a href="/retrospectiva-2012/">Retrospectiva 2012</a>
      </li>
    
      <li class="post">
        <a href="/eati-2012-em-frederico-westphalen/">EATI 2012 em Frederico Westphalen</a>
      </li>
    
      <li class="post">
        <a href="/w3c-webbr-2102/">W3C webbr 2102</a>
      </li>
    
      <li class="post">
        <a href="/javascript-o-guia-definitivo/">JavaScript: O Guia definitivo</a>
      </li>
    
      <li class="post">
        <a href="/braziljs-entrevista-na-tv/">BrazilJS - Entrevista na TV</a>
      </li>
    
      <li class="post">
        <a href="/braziljs-2012-foto-epica-com-o-brendan/">BrazilJS 2012 - Foto épica com o Brendan Eich</a>
      </li>
    
      <li class="post">
        <a href="/fundacao-braziljs/">Fundação BrazilJS</a>
      </li>
    
      <li class="post">
        <a href="/experimento-de-web-scraping-com-nodejs/">Experimento de Web Scraping com nodeJS</a>
      </li>
    
      <li class="post">
        <a href="/braziljs-2012/">BrazilJS 2012</a>
      </li>
    
      <li class="post">
        <a href="/web-scraping-para-criancas-com-nodejs/">Web Scraping para crianças com nodeJS</a>
      </li>
    
      <li class="post">
        <a href="/jsconf-argentina-resumo/">JSConf Argentina - Resumo</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
	<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Jaydson's Blog</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://jaydson.org" property="cc:attributionName" rel="cc:attributionURL">Jaydson Gomes</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>
</p>
<p>
	<span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<script type="text/javascript" src="/javascripts/jaydson.js"></script>
<script type="text/javascript" src="/javascripts/blog-header-experiments.js"></script>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jaydson';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jaydson.org/capturar-erros-ajax-com-jquery/';
        var disqus_url = 'http://jaydson.org/capturar-erros-ajax-com-jquery/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
