
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Javascript - Recursão para executar N vezes uma função - Jaydson Gomes</title>
  <meta name="author" content="Jaydson Gomes">


<meta name="description" content="Jaydson Gomes - Um Blog sobre HTML5, JavaScript e outras coisas">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta property="og:title" content="Jaydson Gomes" />
  <meta property="og:description" content="Jaydson Gomes - Um Blog sobre HTML5, JavaScript e outras coisas" />
  <meta property="og:image" content="/images/jaydson-gomes-logo.png" />

  
  <link rel="canonical" href="http://jaydson.org/javascript-recursao-para-executar-n-vezes-uma-funcao/">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Condensed' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/blog-header-experiments.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Jaydson Gomes" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1264252-8']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup id="header-stage">
  <h1><a href="/">Jaydson Gomes</a></h1>
  
    <h2>HTML5 | JavaScript</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jaydson.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h2 class="entry-title">Javascript - Recursão Para Executar N Vezes Uma Função</h2>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-07T23:33:17-03:00" pubdate data-updated="true">Jun 7<span>th</span>, 2010</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Para quem gosta de desafios de programação em Javascript, encare esse post como um, senão encare apenas como uma dica mesmo.
Se encarou como desafio, tente implementar uma solução diferente(melhor?) para o problema:
- Criar uma função genérica (leia-se reuzável) que execute uma determinada função X vezes em Y milisegundos.
Sacaram a ideia?
Imaginem uma aplicação onde precisamos chamar diversas vezes uma função em um determinado intervalo.
Este é o desafio, porém o legal é fazer isso em uma única função e sem usar variáveis auxiliares.
Para quem gosta de desafios de programação em Javascript, encare esse post como um, senão encare apenas como uma dica mesmo.
Se encarou como desafio, tente implementar uma solução diferente(melhor?) para o problema:
- Criar uma função genérica (leia-se reuzável) que execute uma determinada função X vezes em Y milisegundos.
Sacaram a ideia?
Imaginem uma aplicação onde precisamos chamar diversas vezes uma função em um determinado intervalo.
Este é o desafio, porém o legal é fazer isso em uma única função e sem usar variáveis auxiliares.</p>

<!-- more -->


<p>Minha implementação segue abaixo:
[javascript]
function _(i,m,callback){</p>

<pre><code> setTimeout(function(){
   return i&amp;gt;1?_(--i,m,callback):false;
},m);
callback(i);
</code></pre>

<p>}
[/javascript]</p>

<p>Simples, não?
Mais abaixo vou explicar o que acontece.
Com essa função é possível fazer implementações deste tipo:
[javascript]
/<em>
   Irá executar 5 vezes no intervalo de 500 milisegundos a função anônima abaixo.
</em>/
_(5,500,function(){</p>

<pre><code>    // XHR buscando um JSON
$.getJSON('sample.json',function(jsonObject){
    console.log(jsonObject);
});
</code></pre>

<p>});</p>

<p>/<em>
   Irá executar 44 vezes no intervalo de 1 segundo a função anônima abaixo.
</em>/
_(44,1000,function(){</p>

<pre><code>   console.log('X');
</code></pre>

<p>});</p>

<p>[/javascript]</p>

<p>Bom, esta função resolveu um problema específico que enfrentei, e resolvi posta-la para quem possa precisar um dia.
Mas o interessante é sua implementação em poucas linhas e sua recursividade.</p>

<p>Explicação:
Notem que a função recebe 3 parâmetros (i,m,callback) onde:
i = Quantidade de vezes que a função deve ser executada
m = Intervalo em milisegundos
callback = Função a ser executada</p>

<p>A primeira ação da função é executar o setTimeout() passando a função e os milisegundos.
Logo uma operação ternária para verificar se a quantidade é maior que 1. Porque isso?
Porque para economizar variáveis auxiliares e outras possíveis complicações, o que fiz foi decrementar a quantidade de vezes, ou seja, se a função deve ser executada 5 vezes, começo em 5 até chegar a 1.
Se ainda é maior então chamamos a mesma função recursivamente, e claro, decrementando a quantidade de vezes.
<em><strong>OBS:</strong> O decremento à esquerda (&#8211;i) faz com que a variável i seja decrementada antes de ser passada para a função.</em>
A cada chamada, a função passada é executada e ainda devolve o índice atual para possível manipulação.</p>

<p>Enfim, esta foi minha solução, caso consigam desenvolver outra, ou já tenham feito algo parecido, postem ai! ;)</p>

<p>Minha implementação segue abaixo:</p>

<p>[javascript]
function _(i,m,callback){</p>

<pre><code> setTimeout(function(){
   return i&gt;1?_(--i,m,callback):false;
},m);
callback(i);
</code></pre>

<p>}
[/javascript]</p>

<p>Simples, não?
Mais abaixo vou explicar o que acontece.
Com essa função é possível fazer implementações deste tipo:</p>

<p>[javascript]
/<em>
   Irá executar 5 vezes no intervalo de 500 milisegundos a função anônima abaixo.
</em>/
_(5,500,function(){</p>

<pre><code>    // XHR buscando um JSON
$.getJSON('sample.json',function(jsonObject){
    console.log(jsonObject);
});
</code></pre>

<p>});</p>

<p>/<em>
   Irá executar 44 vezes no intervalo de 1 segundo a função anônima abaixo.
</em>/
_(44,1000,function(){</p>

<pre><code>   console.log('X');
</code></pre>

<p>});</p>

<p>[/javascript]</p>

<p>Bom, esta função resolveu um problema específico que enfrentei, e resolvi posta-la para quem possa precisar um dia.
Mas o interessante é sua implementação em poucas linhas e sua recursividade.</p>

<p>Explicação:
Notem que a função recebe 3 parâmetros (i,m,callback) onde:
i = Quantidade de vezes que a função deve ser executada
m = Intervalo em milisegundos
callback = Função a ser executada</p>

<p>A primeira ação da função é executar o setTimeout() passando a função e os milisegundos.
Logo uma operação ternária para verificar se a quantidade é maior que 1. Porque isso?
Porque para economizar variáveis auxiliares e outras possíveis complicações, o que fiz foi decrementar a quantidade de vezes, ou seja, se a função deve ser executada 5 vezes, começo em 5 até chegar a 1.
Se ainda é maior então chamamos a mesma função recursivamente, e claro, decrementando a quantidade de vezes.
<em><strong>OBS:</strong> O decremento à esquerda (&#8211;i) faz com que a variável i seja decrementada antes de ser passada para a função.</em>
A cada chamada, a função passada é executada e ainda devolve o índice atual para possível manipulação.</p>

<p>Enfim, esta foi minha solução, caso consigam desenvolver outra, ou já tenham feito algo parecido, postem ai! ;)</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jaydson Gomes</span></span>

      








  


<time datetime="2010-06-07T23:33:17-03:00" pubdate data-updated="true">Jun 7<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/javascript/'>JavaScript</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://jaydson.org/javascript-recursao-para-executar-n-vezes-uma-funcao/" data-via="" data-counturl="http://jaydson.org/javascript-recursao-para-executar-n-vezes-uma-funcao/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/jquery-customizando-expressoes/" title="Previous Post: jQuery - Customizando expressões">&laquo; jQuery - Customizando expressões</a>
      
      
        <a class="basic-alignment right" href="/zend-registerautoload-is-deprecated/" title="Next Post: Zend - registerAutoload is deprecated">Zend - registerAutoload is deprecated &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
<section>
	<span class="avatar">
		<img src="http://www.gravatar.com/avatar/572696200604e59baa59ee90d61f7d02?s=180" alt="Jaydson Gomes " title="Jaydson Gomes" />
	</span>
</section>
<section class="author">	
	<strong>Entusiasta JavaScript && FrontEnd Engineer no Terra && Curador do BrazilJS</strong>
</section><section>
  <h1>Posts Recentes</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/cultura-maldita-no-desenvolvimento-de-software/">Cultura maldita no desenvolvimento de software</a>
      </li>
    
      <li class="post">
        <a href="/rsjs-2013-resumo/">RSJS 2013 - Resumo</a>
      </li>
    
      <li class="post">
        <a href="/como-foi-a-braziljs-conf-2012/">Como foi a BrazilJS Conf 2012</a>
      </li>
    
      <li class="post">
        <a href="/riojs-2013/">RioJS 2013</a>
      </li>
    
      <li class="post">
        <a href="/rsjs-2013/">RSJS 2013</a>
      </li>
    
      <li class="post">
        <a href="/experimentos-html5-no-header-do-blog/">Experimentos HTML5 no header do Blog</a>
      </li>
    
      <li class="post">
        <a href="/migrando-para-octopress/">Migrando para o Octopress</a>
      </li>
    
      <li class="post">
        <a href="/analytics-do-blog-em-2012/">Analytics do Blog em 2012</a>
      </li>
    
      <li class="post">
        <a href="/retrospectiva-2012/">Retrospectiva 2012</a>
      </li>
    
      <li class="post">
        <a href="/eati-2012-em-frederico-westphalen/">EATI 2012 em Frederico Westphalen</a>
      </li>
    
      <li class="post">
        <a href="/w3c-webbr-2102/">W3C webbr 2102</a>
      </li>
    
      <li class="post">
        <a href="/javascript-o-guia-definitivo/">JavaScript: O Guia definitivo</a>
      </li>
    
      <li class="post">
        <a href="/braziljs-entrevista-na-tv/">BrazilJS - Entrevista na TV</a>
      </li>
    
      <li class="post">
        <a href="/braziljs-2012-foto-epica-com-o-brendan/">BrazilJS 2012 - Foto épica com o Brendan Eich</a>
      </li>
    
      <li class="post">
        <a href="/fundacao-braziljs/">Fundação BrazilJS</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
	<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Jaydson's Blog</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://jaydson.org" property="cc:attributionName" rel="cc:attributionURL">Jaydson Gomes</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>
</p>
<p>
	<span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<script type="text/javascript" src="/javascripts/jaydson.js"></script>
<script type="text/javascript" src="/javascripts/blog-header-experiments.js"></script>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jaydson';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jaydson.org/javascript-recursao-para-executar-n-vezes-uma-funcao/';
        var disqus_url = 'http://jaydson.org/javascript-recursao-para-executar-n-vezes-uma-funcao/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
